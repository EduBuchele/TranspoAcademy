<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<h:body>
	<h:head>
	</h:head>
	<h1>Projeto Curso</h1>
	<p:growl id="msgs" showDetail="true" />

	<h:form>
		<p:menuButton value="Menu">
			<p:menuitem value="Cursos" action="curso?faces-redirect=true"
				icon="ui-icon-pencil" />
			<p:menuitem value="Professores"
				action="professor?faces-redirect=true" icon="ui-icon-pencil" />
			<p:separator />
			<p:menuitem value="Logout" action="curso?faces-redirect=true"
				icon="fa fa-fw fa-sign-out" />
		</p:menuButton>
	</h:form>

	<p:fieldset legend="Cadastro de Cursos">
		<p:messages />

		<h:form id="formCurso">

			<p:panelGrid columns="5" columnClasses="label, value">

				<p:outputLabel value="Curso:  " for="nome" />
				<p:inputText id="nome" value="#{cursoBean.curso.nomeCurso}" />

				<p:outputLabel value="Selecione Professor:" for="professor" />

				<p:selectOneMenu value="#{cursoBean.professorId}" id="professor">
					<f:selectItems value="#{cursoBean.professores}" var="professor"
						itemLabel="#{professor.nomeProfessor}" itemValue="#{professor.id}" />
				</p:selectOneMenu>
				<p:commandButton value="Add Professor"
					action="#{cursoBean.addProfessorCurso}" process="@this professor"
					update="tabelaProfessores" />

				<p:commandLink value="ou cadastrar novo Professor"
					action="professor" immediate="true" update="@all" />

				<p:commandButton value="Salvar" action="#{cursoBean.adicionar}"
					process="@form" update="@form :formTabelaCursos" />
			</p:panelGrid>

			<p:dataList value="#{cursoBean.professoresDoCurso}" var="professor"
				id="tabelaProfessores" emptyMessage="Nenhum Autor" type="definition">
								 #{professor.nomeProfessor}
				<p:commandButton icon="ui-icon-trash"
					action="#{cursoBean.removerProfessorDoCurso(professor)}"
					update="tabelaProfessores" process="@this" />
			</p:dataList>
		</h:form>
	</p:fieldset>

	<p:separator id="separator" />



	<h:form id="formTabelaCursos">
		<p:fieldset legend="Lista de Cursos" toggleable="true"
			toggleSpeed="500">
			<p:ajax event="toggle" listener="#{fieldsetView.handleToggle}"
				update="msgs" />
			<h:panelGrid columns="4">
				<p:dataTable var="curso" value="#{cursoBean.cursos}"
					id="tabelaCursos" widgetVar="tabelaCursos" paginator="true"
					rows="5" lazy="true">

					<p:column headerText="Descrição">
						<h:outputText value="#{curso.nomeCurso}" />
					</p:column>

					<p:column headerText="Professor">
						<h:outputText value="#{curso.professores}" />
					</p:column>

					<p:column headerText="Remover">
						<p:commandButton id="withIcon"
							actionListener="#{cursoBean.remover(curso)}"
							update="tabelaCursos" icon="ui-icon-trash" value="Delete" />
					</p:column>

				</p:dataTable>
			</h:panelGrid>
		</p:fieldset>

	</h:form>





</h:body>
</html>